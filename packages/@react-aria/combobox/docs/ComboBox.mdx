{/* Copyright 2020 Adobe. All rights reserved.
This file is licensed to you under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License. You may obtain a copy
of the License at http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS
OF ANY KIND, either express or implied. See the License for the specific language
governing permissions and limitations under the License. */}

import {Layout} from '@react-spectrum/docs';
export default Layout;

import docs from 'docs:@react-aria/combobox';
import collectionsDocs from 'docs:@react-types/shared/src/collections.d.ts';
import {FunctionAPI, HeaderInfo, InterfaceType, TypeContext, TypeLink, PageDescription} from '@react-spectrum/docs';
import i18nDocs from 'docs:@react-aria/i18n';
import listboxDocs from 'docs:@react-aria/listbox';
import overlaysDocs from 'docs:@react-aria/overlays';
import packageData from '@react-aria/combobox/package.json';
import selectionDocs from 'docs:@react-stately/selection';
import statelyDocs from 'docs:@react-stately/combobox';
import Anatomy from './anatomy.svg';
import ChevronRight from '@spectrum-icons/workflow/ChevronRight';
import {ExampleCard} from '@react-spectrum/docs/src/ExampleCard';
import examplePreview from 'url:./example.png';
import searchExamplePreview from 'url:./search.png';
import materialExamplePreview from 'url:./material.png';
import styledExamplePreview from 'url:./styled-components.png';
import chakraExamplePreview from 'url:./chakra.png';

---
category: Pickers
keywords: [combobox, autocomplete, autosuggest, typeahead, search, aria]
---

# ComboBox

<PageDescription>{docs.exports.useComboBox.description}</PageDescription>

<HeaderInfo
  packageData={packageData}
  componentNames={['ComboBox']}
  sourceData={[
    {type: 'W3C', url: 'https://www.w3.org/WAI/ARIA/apg/patterns/combobox/'}
  ]} />

[Hooks](useComboBox.html) • [Component](ComboBox.html)

## Example

```tsx
import {ComboBox, Label, Input, Button, Popover, ListBox} from 'react-aria-components';

<ComboBox>
  <Label style={{display: 'block'}}>Test</Label>
  <div style={{display: 'flex'}}>
    <Input />
    <Button>
      <span aria-hidden="true" style={{ padding: '0 2px' }}>▼</span>
    </Button>
  </div>
  <Popover placement="bottom end">
    <ListBox className="menu">
      <Item className={itemClass}>Foo</Item>
      <Item className={itemClass}>Bar</Item>
      <Item className={itemClass}>Baz</Item>
    </ListBox>
  </Popover>
</ComboBox>
```

## Anatomy

<Anatomy />

A combo box consists of a label, an input which displays the current value, a list box popup, and an optional button
used to toggle the list box popup open state. Users can type within the input to filter the available options
within the list box. The list box popup may be opened by a variety of input field interactions specified
by the `menuTrigger` prop provided to `ComboBox`, or by clicking or touching the button.

### Concepts

`ComboBox` makes use of the following concepts:

* [Collections](../react-stately/Collections.html)
* [Selection](../react-stately/Selection.html)

### Composed components

A `ComboBox` uses the following components, which may also be used standalone or reused in other components.

* [Label](useLabel.html)
* [Input](Input.html)
* [Button](useButton.html)
* [Popover](useOverlay.html)
* [ListBox](useListBox.html)

### Hooks

For more customization options, React Aria hooks can be used to replace any of the components used in a `ComboBox`.

* [useComboBox](useComboBox.html)

## Making it reusable

```tsx
function MyComboBox({label, children, ...props}) {
  return (
    <ComboBox {...props}>
      <Label style={{display: 'block'}}>{label}</Label>
      <div style={{display: 'flex'}}>
        <Input />
        <Button>
          <span aria-hidden="true" style={{ padding: '0 2px' }}>▼</span>
        </Button>
      </div>
      <Popover placement="bottom end">
        <ListBox
          className="menu"
          renderItem={item => (
            <Option item={item} className={itemClass}>
              {({isSelected}) => <>{item.rendered}{isSelected ? ' (selected)' : ''}</>}
            </Option>
          )}>
          {children}
        </ListBox>
      </Popover>
    </ComboBox>
  );
}
```

## Usage

### Dynamic collections

ComboBox follows the [Collection Components API](../react-stately/collections.html), accepting both static and dynamic collections.
The examples above show static collections, which can be used when the full list of options is known ahead of time. Dynamic collections,
as shown below, can be used when the options come from an external data source such as an API call, or update over time.

As seen below, an iterable list of options is passed to the ComboBox using the `defaultItems` prop. Each item accepts a `key` prop, which
is passed to the `onSelectionChange` handler to identify the selected item. Alternatively, if the item objects contain an `id` property,
as shown in the example below, then this is used automatically and a `key` prop is not required.

```tsx example
function Example() {
  let options = [
    {id: 1, name: 'Aerospace'},
    {id: 2, name: 'Mechanical'},
    {id: 3, name: 'Civil'},
    {id: 4, name: 'Biomedical'},
    {id: 5, name: 'Nuclear'},
    {id: 6, name: 'Industrial'},
    {id: 7, name: 'Chemical'},
    {id: 8, name: 'Agricultural'},
    {id: 9, name: 'Electrical'}
  ];
  let [majorId, setMajorId] = React.useState();

  return (
    <>
      <MyComboBox defaultItems={options} onSelectionChange={setMajorId}>
        {(item) => <Item>{item.name}</Item>}
      </MyComboBox>
      <p>Selected topic id: {majorId}</p>
    </>
  );
}
```
